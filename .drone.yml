kind: pipeline
name: default

steps:
  - name: test
    image: gradle:jdk8
    commands:
      - ./gradlew clean build
  - name: publish
    image: plugins/ecr
    settings:
      access_key:
        from_secret: ac_key
      secret_key:
        from_secret: sec_key
      repo: drone
      registry: 246488978151.dkr.ecr.us-east-1.amazonaws.com
      
kind: secret
name: ac_key
data: Z3bnDZ1WAozShybUJRoGZesNdFP+NgN+vGBN4ujvx5YDXiA8WesfI4LeVYc93em9

kind: secret
name: sec_key
data: /GsH8OWVGtBGoSJ388UduFpiGqxgGMdU916bi6XUZ+cZmvZvKnsA4hDYCNma45e0WM1e8ca8AuLZ1SlDDkoYlAK2fGk=
